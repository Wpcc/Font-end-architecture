# 对象

### 属性类型

ECMAScript中有两种属性：数据属性和访问器属性。为了表示特性是内部值，ECMA-262第5版把它们放在两对方括号中，例如 [[Configurable]]

- 数据属性：定义对象数据（属性）的操作权限
  - [[Configurable]]：能否通过 delete 删除属性，能否修改属性的特性，能否把属性修改为访问器属性。默认值为 true
  - [[Enumerable]]：能否通过 for-in 循环返回属性。默认值为 true
  - [[Writable]]：能否修改属性的值。默认值为 true
  - [[Value]]：包含这个属性的数据值。默认值为 undefined

```javascript
// 数据属性
// Writable
let person = {}
Object.defineProperty(person,'name',{
    writable:false,
    value:'Nicholas'
})
console.log(person.name) // Nicholas
person.name = 'Greg'
console.log(person.name) //Nicholas
```

```javascript
// Configurable
let person = {}
Object.defineProperty(person,'name',{
    configurable:false,
    value:'Nicholas'
})
console.log(person.name) // Nicholas
delete person.name
console.log(person.name) // Nicholas
// 一旦设置 configurable 为 false 后，就不能修改它的数据属性了
```

```javascript
// Enumerable
let person = {
    name:'Nicholas',
    age:16
}
Object.defineProperty(person,'name',{
    enumerable:false
})
for(item in person){
    console.log(item) // 报错
}
```

```javascript
// Value
let person = {}
Object.defineProperty(person,'name',{
    value:'Nicholas'
})
console.log(person.name)
```

- 访问器属性：读取对象数据，对象数据就是访问器
  - [[Configurable]]：能否通过 delete 删除属性，能否修改属性的特性，能否把属性修改为访问器属性。默认值为 true
  - [[Enumerable]]：能否通过 for-in 循环返回属性。默认值为 true
  - [[Get]]：读取属性时调用的函数。默认值为 undefined
  - [[Set]]：写入属性时调用的函数。默认值为 undefined

```javascript
// 访问器属性
let book = {
    __year:2004,
    edition:1
}
Object.defineProperty(book,'year',{ // year 便是访问器属性
    get:function(){
        return this.__year
    },
    set:function(newValue){
        if(newValue > 2004){
            this.__year = newValue
            this.edition += newValue - 2004
        }
    }
})
book.year = 2005
console.log(book.edition)
```

```javascript
let book = {
    year = 2004
}
Object.defineProperty(book,'year',{ // year 是访问器属性
    get:function(){
        return '公元后' + this.year
    },
    set:function(newValue){
        this.year = newValue
    }
})
```

**JavaScript 访问器属性是 Vue 中实现数据双向绑定的原理**

**综合：**

数据属性：定义对象属性（数据）的操作权限，包括：是否配置，是否列举，是否删除，内容

访问器属性：访问对象属性（数据）的操作权限，包括：是否配置，是否列举，访问函数，设置函数。

