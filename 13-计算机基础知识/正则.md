# 正则

## 基本概念

正则表达式（英语：Regular Expression，在代码中常简写为regex、regexp或RE）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式。

说人话，规则表达式。



### 语法

```javascript
// /正则表达式主体/修饰符（可选）

let partern = /abc/ // 如果不加修饰符g，匹配到结果即结束
let partern = /abc/g // 会全局搜索进行匹配搜索
let partern = /a+/g // 会全局匹配，+贪婪匹配，比如`aaaaaab`，它会尽量匹配多的
```

需要记住正则表达式的主体为一个萝卜一个坑，`/abc/`表示搜索abc的字符串。



### JavaScript提供的方法

- search() 方法

  - 用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串，并返回子串的起始位置。

  ```javascript
  var str = "Visit Runoob!"; 
  var n = str.search(/Runoob/i);
  ```

  

- replace() 方法

  - 用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。

  ```javascript
  var str = document.getElementById("demo").innerHTML; 
  var txt = str.replace(/microsoft/i,"Runoob");
  ```

  

- test() 方法

  - 方法用于检测一个字符串是否匹配某个模式，如果字符串中含有匹配的文本，则返回 true，否则返回 false。

  ```javascript
  var patt = /e/;
  patt.test("The best things in life are free!");
  ```

  

- exec() 方法

  - 方法用于检索字符串中的正则表达式的匹配。该函数返回一个数组，其中存放匹配的结果。如果未找到匹配，则返回值为 null。

  ```javascript
  /e/.exec("The best things in life are free!");
  ```



## 规则

### 表位置

- `^` 表开头
- `$` 表结尾

```
console.log(/^a\wc$/.test(acc))
```

### 表范围

- `[]`满足其中的一个即可
  - 如`/[abc]b/`表示第一个字符满足abc其中的一个，第二个满足b
- `[a-z]` 、`[A-Z]`、`[^abc]`
  - 匹配所有小写字母、所有大写字母、除abc之外的所有字母。在中括号里`^`代表非的意思。
- `.`
  - 匹配除换行符（\n、\r）之外的任何单个字符，相当于`[^\n\r]`
- `\s\S`
  - 匹配所有。`\s`匹配所有空白字符，包括换行。`\S`非空白符，不包括换行。
- `\w`
  - 匹配字母、数字、下划线。等价于`[A-Za-z0-9]`

### 表次数

- `?`
  - 匹配前面的子表达式零次或一次。
- `+`
  - 匹配前面的子表达式一次或多次。
- `*`
  - 匹配前面的子表达式零次或多次。
- `{n}`
  - n 是一个非负整数。匹配确定的 n 次。
- `{n,}`
  -  n 是一个非负整数。至少匹配n 次。
- `{n,m}`
  - m 和 n 均为非负整数，其中n <= m。

## 概念解释

#### 贪婪和非贪婪

**`*`和`+`限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配。**

- 贪婪

  - 下面的表达式匹配从开始小于符号 (<) 到关闭 h1 标记的大于符号 (>) 之间的所有内容。

  ```javascript
  /<.*>/
  /*
  <h1>hellow world</h1> 
  match：<h1>hellow world</h1> 
  ```

  

- 非贪婪

  - 如果您只需要匹配开始和结束 h1 标签，下面的非贪婪表达式只匹配 <h1>。

  ```javascript
  /<.*?>/
  /*
  <h1>hellow world</h1> 
  match：<h1>
  ```



#### 捕获分组

**()** 表示捕获分组，**()** 会把每个分组里的匹配的值保存起来， 多个匹配值可以通过数字 n 来查看(**n** 是一个数字，表示第 n 个捕获组的内容)。

需要注意的是组零始终代表整个表达式。

比如`/(a)(b(c))/`

| 0    | (a)(b(c)) |
| ---- | --------- |
| 1    | (a)       |
| 2    | (b(c))    |
| 3    | (c)       |

这里举个例子：

`/(["']).*\1/`这个正则中，我们使用`\1`去使用第一个捕获组（这里指的是捕获组的内容而不是规则）。

比如上面规则是无法匹配 “1‘ 和 ’a” 这样的内容。

```javascript
/(["']).*\1/g.match('hello')
```

#### 非捕获分组

以 (?) 开头的组是纯的*非捕获* 组，它不捕获文本 ，也不针对组合计进行计数。

就是说，如果小括号中以?号开头，那么这个分组就不会捕获文本，当然也不会有组的编号，因此也不存在Back 引用。



## 引用

[分组](https://www.cnblogs.com/zhaoshujie/p/10103315.html)

[菜鸟教程](https://www.runoob.com/regexp/regexp-syntax.html)

